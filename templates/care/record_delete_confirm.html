{% extends "base.html" %}
{% block title %}Excluir registro • CuidarJuntos{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto bg-white border rounded-xl p-6 space-y-5">
  <div>
    <h1 class="text-lg font-semibold">Excluir registro</h1>
    {% if has_series %}
      <p class="text-sm text-gray-600 mt-1">Este registro faz parte de uma série recorrente.</p>
    {% else %}
      <p class="text-sm text-gray-600 mt-1">Confirme abaixo a exclusão do registro selecionado.</p>
    {% endif %}
  </div>

  <div class="bg-gray-50 border rounded-lg p-4 text-sm space-y-1">
    <p class="font-medium">
      {{ record.get_type_display }}
      {% if record.what %}• {{ record.what }}{% endif %}
    </p>
    <p class="text-gray-600">
      {{ record.date|date:"d/m/Y" }}
      {% if record.time %}• {{ record.time|time:"H:i" }}{% endif %}
    </p>
    {% if record.description %}
      <p class="text-gray-600 whitespace-pre-wrap">{{ record.description }}</p>
    {% endif %}
  </div>

  <form method="post" class="space-y-4">
    {% csrf_token %}
    {% if next_url %}
      <input type="hidden" name="next" value="{{ next_url }}">
    {% endif %}

    {% if has_series %}
      <fieldset class="space-y-3">
        <legend class="text-sm font-medium text-gray-700 mb-1">Como deseja prosseguir?</legend>

        <label class="flex items-start gap-2 text-sm text-gray-700">
          <input type="radio" name="scope" value="single" class="mt-1" checked>
          <span>
            <strong>Somente esta ocorrência</strong><br>
            <span class="text-xs text-gray-500">Mantém os demais registros da série.</span>
          </span>
        </label>

        <label class="flex items-start gap-2 text-sm text-gray-700">
          <input type="radio" name="scope" value="future" class="mt-1">
          <span>
            <strong>Esta e todas as seguintes</strong><br>
            <span class="text-xs text-gray-500">Remove a partir desta data, igual ao Google Agenda.</span>
          </span>
        </label>
      </fieldset>
    {% else %}
      <p class="text-sm text-gray-700">Tem certeza que deseja excluir este registro?</p>
    {% endif %}

    <div class="flex flex-wrap gap-3">
      <button type="submit" class="px-4 py-2 rounded-lg bg-rose-600 text-white hover:bg-rose-700">
        Excluir
      </button>
      <a href="{{ next_url }}" class="px-4 py-2 rounded-lg border hover:bg-gray-50">Cancelar</a>
    </div>
  </form>
</div>
{% endblock %}
